import { useState } from "react";
import { useNavigate, useLocation } from "react-router-dom";

function SideBarPage({ usersData }) {
  const [search, setSearch] = useState("");
  const navigate = useNavigate();
  const location = useLocation();

  // Filter users locally
  const filteredUsers = usersData.filter(
    user =>
      user.firstName.toLowerCase().includes(search.toLowerCase()) ||
      user.lastName.toLowerCase().includes(search.toLowerCase())
  );

  function handleKeyDown(e) {
    if (e.key === "Enter") {
      // Navigate to /?q=search, which will trigger the loader
      navigate(`/?q=${encodeURIComponent(search)}`);
    }
  }

  return (
    <div>
      <input
        type="search"
        value={search}
        onChange={e => setSearch(e.target.value)}
        onKeyDown={handleKeyDown}
        placeholder="Search users"
      />
      <ul>
        {filteredUsers.map(user => (
          <li key={user.id}>{user.firstName} {user.lastName}</li>
        ))}
      </ul>
    </div>
  );
}